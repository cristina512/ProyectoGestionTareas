--Tabla usuario
CREATE TABLE USUARIO(
	ID_USUARIO NUMBER(10) GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
	NOMBRE VARCHAR2(30) NOT NULL,
	EMAIL VARCHAR2(100) UNIQUE NOT NULL,
	PASSWORD VARCHAR2(30) NOT NULL,
	FECHA_REGISTRO DATE,
);

--Tabla equipo
CREATE TABLE EQUIPO(
	ID_EQUIPO NUMBER(10) GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
	NOMBRE VARCHAR2(30) NOT NULL,
	DESCRIPCION VARCHAR2(100),
	FECHA_CREACION DATE,
	ID_USU_LIDER NUMBER(10)
	FOREIGN KEY(ID_USU_LIDER) REFERENCES USUARIO(ID_USUARIO)
);

--Tabla relacion usuario y equipo
CREATE TABLE USUARIO_EQUIPO(
	ID_USUARIO NUMBER(10),
	ID_EQUIPO NUMBER(10),
	FECHA_UNION DATE,
	PRIMARY KEY(ID_USUARIO, ID_EQUIPO),
	FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),
	FOREIGN KEY(ID_EQUIPO) REFERENCES EQUIPO(ID_EQUIPO)
);

--Tabla proyecto
CREATE TABLE PROYECTO(
	ID_PROYECTO NUMBER(10) GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
	NOMBRE VARCHAR2(30) NOT NULL,
	DESCRIPCION VARCHAR2(100),
	FECHA_INICIO DATE,
	FECHA_FIN DATE,
	ID_EQUIPO NUMBER(10),
	FOREIGN KEY(ID_EQUIPO) REFERENCES EQUIPO(ID_EQUIPO)
);

--Tabla etiqueta
CREATE TABLE ETIQUETA(
	ID_ETIQUETA NUMBER(10) GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
	NOMBRE VARCHAR2(30) NOT NULL,
	ID_USUARIO NUMBER(10),
	ID_EQUIPO NUMBER(10),
	FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),
	FOREIGN KEY(ID_EQUIPO) REFERENCES EQUIPO(ID_EQUIPO)
);

--Tabla tarea
CREATE TABLE TAREA(
	ID_TAREA NUMBER(10) GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
	TITULO VARCHAR2(30) NOT NULL,
	DESCRIPCION VARCHAR2(100),
	FECHA_CREACION DATE,
	FECHA_VENCIMIENTO DATE,
	ID_USU_CREADOR NUMBER(10),
	ID_USU_ASIGNADO NUMBER(10),
	ID_PROYECTO NUMBER(10),
	FOREIGN KEY(ID_USU_CRADOR) REFERENCES USUARIO(ID_USUARIO),
	FOREIGN KEY(ID_USU_ASIGNADO) REFERENCES USUARIO(ID_USUARIO),
	FOREIGN KEY(ID_PROYECTO) REFERENCES PROYECTO(ID_PROYECTO)
);

--Tabla tarea-etiqueta
CREATE TABLE TAREA_ETIQUETA(
	ID_TAREA NUMBER(10),
	ID_ETIQUETA NUMBER(10),
	PRIMARY KEY(ID_TAREA, ID_ETIQUETA),
	FOREIGN KEY(ID_TAREA) REFERENCES TAREA(ID_TAREA),
	FOREIGN KEY(ID_ETIQUETA) REFERENCES ETIQUETA(ID_ETIQUETA)
);

--Tabla de los comentarios
CREATE TABLE COMENTARIO(
	ID_COMENTARIO NUMBER(10) GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
	CONTENIDO VARCHAR2(100) NOT NULL,
	FECHA_CREACION DATE,
	ID_USUARIO NUMBER(10),
	ID_TAREA NUMBER(10),
	FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(ID_USUARIO),
	FOREIGN KEY(ID_TAREA) REFERENCES TAREA(ID_TAREA)
);